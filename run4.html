<!DOCTYPE HTML>
<html>
<head>
<script src="datAll.js"></script>
<script src= "Bid.js"></script>
<script type="text/javascript" src="/assets/script/canvasjs.min.js"></script>
<script type="text/javascript">
//https://canvasjs.com/docs/charts/how-to/multiple-y-axis/

var graphableArrayLMP = ALLDATA.map(function(element){
                  var intermediate = {};
                  intermediate.x = element[1]+'/'+element[2];
                  intermediate.y = element[6]; 
                  return intermediate; 
                });
var graphableArrayProfit = ALLDATA.map(function(element){
    var intermediate = {};
    intermediate.x = element[1]+'/'+element[2];
    if(element[6]>BidPrice){intermediate.y = BidMW*(element[6]-BidPrice)}
    else{intermediate.y = 0}
    return intermediate;              
    });   


window.onload = function(){
	var chart = new CanvasJS.Chart("chartContainer",{              
		title:{
			text: "MIT Demand Repsonse Profitability"
		},
		axisX:{
			valueFormatString: "##/##/##/##",
			interval: 1 
		},
		axisY:[{
			title: "LMP",
			lineColor: "#369EAD",
			titleFontColor: "#369EAD",
			labelFontColor: "#369EAD"
		},
		],
		axisY2:[{
			title: "Profitability",
			lineColor: "#7F6084",
			titleFontColor: "#7F6084",
			labelFontColor: "#7F6084"
		},
		],

	data: [
	{
		type: "spline",
		showInLegend: true,
		//axisYIndex: 0, //Defaults to Zero
		name: "LMP",
		xValueFormatString: "##/##/##/##",
		dataPoints: graphableArrayLMP
	},
	{
		type: "column",
		showInLegend: true,
		axisYIndex: 1, //Defaults to Zero
		name: "Profitability",
		xValueFormatString: "##/##/##/##",
		dataPoints: graphableArrayProfit
	},
	]
	});

	chart.render();
}
</script>
</head>

<body>
<div id="chartContainer" style="height: 300px; width: 100%;">
</div>
</body>
</html>