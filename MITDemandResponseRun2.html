<html>
        <head>
          <script src="datAll.js"></script>
          <script src= "Bid.js"></script>
          <script src="https://www.amcharts.com/lib/3/amcharts.js"></script>
          <script src="https://www.amcharts.com/lib/3/serial.js"></script>
          <script src="https://www.amcharts.com/lib/3/themes/light.js"></script>
          <script type="text/javascript">
          
          //the citation for this format is here
          //https://www.amcharts.com/kbase/combining-column-and-line-graphs-with-separate-axis/
          var graphableArray = ALLDATA.map(function(element){
                  var intermediate = {};
                  intermediate.date = element[1]+'/'+element[2];
                  if(element[6]>BidPrice){intermediate.profit = BidMW*(element[6]-BidPrice)}
                  else{intermediate.profit = 0}
                  intermediate.LMP = element[6]; 
                  return intermediate; 
                  //output should be {month/day/year/hour, profit, LMP}
                });
          var chart = AmCharts.makeChart("chart_div", {
            "theme": "light",
            "type": "serial",
            "dataProvider": graphableArray,
            "valueAxes": [{
                "id": "v1",
                "unit": "$",
                "unitPosition": "left",
                "position": "left",
                "title": "Profit",
            }, {
                "id": "v2",
                "unit": "$/MWh",
                "unitPosition": "right",
                "position": "right",
                "title": "Hourly LMP"
            }],
            "startDuration": 1,
            "graphs": [{
                "fillAlphas": 0.9,
                "lineAlpha": 0.2,
                "type": "column",
                "valueField": "profit",
                "valueAxis": "v1"
            }, {
                "lineAlpha": 0.9,
                "title": "2005",
                "type": "smoothedLine",
                "lineThickness": 1, //used to be 3
                "bullet": "round",
                "bulletBorderColor": "#fff",
                "bulletBorderThickness": 2,
                "bulletBorderAlpha": 1,
                "valueField": "LMP",
                "valueAxis": "v2"
            }],
            "categoryField": "date",
            "categoryAxis": {
                "gridPosition": "start"
            }
            });
    

          </script>
        </head>
        <body>
          <div id="chart_div" style="width: 900px; height: 500px;"></div>
        </body>
      </html>

